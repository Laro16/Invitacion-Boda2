<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invitación de Boda · Isabel & Alejandro</title>
  
  <!-- Carga de Fuentes -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@300;400;600&family=Dancing+Script:wght@500&display=swap" rel="stylesheet">
  
  <!-- Carga de React -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    :root {
      --brand: #a88552;
      --brand-light: #e6d8c3;
      --ink: #2c2c2c;
      --muted: #7d7d7d;
      --accent: #1e413a;
      --bg: #fbf9f6;
      --card: #ffffff;
      --radius: 16px;
      --maxw: 900px;
      --shadow-soft: 0 4px 12px rgba(0,0,0,.05);
      --shadow-medium: 0 8px 24px rgba(0,0,0,.08);
      --transition: all .3s cubic-bezier(.25,.8,.25,1);
    }
    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      margin: 0;
      color: var(--ink);
      font-family: 'Poppins', sans-serif;
      font-weight: 300;
      line-height: 1.7;
      background-color: var(--bg);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
    }
    img { max-width: 100%; display: block; border-radius: var(--radius); }
    ul, ol { margin: 0; padding: 0; list-style: none; }
    a { color: var(--brand); text-decoration: none; transition: var(--transition); }
    a:hover { color: var(--accent); }
    .wrap { max-width: var(--maxw); margin: 0 auto; padding: 0 24px; }
    .title {
      font-family: 'Playfair Display', serif;
      font-weight: 600;
      font-size: clamp(32px, 6vw, 48px);
      margin: 0 0 10px;
      text-align: center;
      line-height: 1.2;
      color: var(--accent);
    }
    .subtitle {
      color: var(--muted);
      text-align: center;
      margin: -2px auto 40px;
      max-width: 600px;
      font-size: 1.1rem;
    }
    header.hero {
      min-height: 90svh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: center;
      position: relative;
      overflow: hidden;
      color: #fff;
      padding: 40px 0;
      background:
        linear-gradient(to top, rgba(30, 65, 58, 0.7), rgba(30, 65, 58, 0.3) 60%, transparent),
        url('/imagenes/hero-portada.jpg') center/cover no-repeat;
    }
    header .badge {
      display: inline-block;
      padding: .4rem 1rem;
      font-weight: 600;
      letter-spacing: .1em;
      text-transform: uppercase;
      font-size: .75rem;
      background: rgba(255,255,255,.15);
      border: 1px solid rgba(255,255,255,.3);
      border-radius: 999px;
      backdrop-filter: blur(5px);
      color: #fff;
    }
    header h1 {
      font-family: 'Playfair Display',serif;
      font-weight: 600;
      font-size: clamp(48px, 10vw, 90px);
      margin: 1rem 0 .5rem;
      line-height: 1.05;
      text-shadow: 0 3px 15px rgba(0,0,0,.3);
      color: #fff;
    }
    header p.sub { color: #f0f0f0; margin: .5rem 0 1.5rem; font-size: 1.1rem; }
    .countdown { display: flex; justify-content: center; gap: 12px; margin: 24px auto; }
    .time-box {
      min-width: 80px;
      border-radius: var(--radius);
      padding: 12px;
      text-align: center;
      color: #fff;
      background: rgba(255,255,255,.1);
      border: 1px solid rgba(255,255,255,.25);
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(8px);
    }
    .time-box .num { font-size: clamp(28px, 5vw, 36px); font-weight: 600; display: block; line-height: 1.1; }
    .time-box .label { font-size: 11px; opacity: .8; letter-spacing: .08em; text-transform: uppercase; }
    .cta-row { display: flex; gap: .8rem; justify-content: center; flex-wrap: wrap; margin-top: 24px; }
    .btn {
      appearance: none;
      border: 1.5px solid;
      background: transparent;
      color: inherit;
      font-weight: 600;
      font-size: 1rem;
      padding: .8rem 1.5rem;
      border-radius: 999px;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: .6rem;
      text-align: center;
      text-transform: uppercase;
      letter-spacing: .05em;
    }
    .btn.primary {
      background-color: var(--brand);
      border-color: var(--brand);
      color: #fff;
      box-shadow: var(--shadow-soft);
    }
    .btn.primary:hover {
      background-color: #947244;
      border-color: #947244;
      transform: translateY(-2px);
      box-shadow: var(--shadow-medium);
    }
    .btn.secondary {
      border-color: rgba(255,255,255,.5);
      color: #fff;
    }
    .btn.secondary:hover {
      background-color: rgba(255,255,255,.1);
      border-color: #fff;
    }
    .btn svg { width: 18px; height: 18px; }
    .btn-script {
      font-family: 'Dancing Script', cursive;
      text-transform: none;
      font-size: 1.2rem;
      font-weight: 500;
      letter-spacing: normal;
      color: #fff;
      padding: .7rem 1.8rem;
    }
    .btn-script svg {
      margin-right: 4px;
      fill: #fff;
    }
    .center-actions {
      display: flex;
      justify-content: center;
      margin-bottom: 40px;
    }
    .center-actions a.btn, .center-actions button.btn {
        margin-bottom: 0;
    }
    section.sectioned {
      padding: 80px 0;
      position: relative;
    }
    section.sectioned::before {
      content: url("data:image/svg+xml,%3Csvg width='80' height='20' viewBox='0 0 80 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M40 10L80 10' stroke='%23a88552' stroke-opacity='0.5'/%3E%3Cpath d='M40 10L0 10' stroke='%23a88552' stroke-opacity='0.5'/%3E%3Cpath d='M45.5 18.5C45.5 18.5 42.5 10 40 10C37.5 10 34.5 1.5 34.5 1.5' stroke='%23a88552' stroke-opacity='0.5'/%3E%3Cpath d='M34.5 18.5C34.5 18.5 37.5 10 40 10C42.5 10 45.5 1.5 45.5 1.5' stroke='%23a88552' stroke-opacity='0.5'/%3E%3C/svg%3E%0A");
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
    }
    .slider {
      position: relative;
      background: var(--card);
      padding: 12px;
      border-radius: var(--radius);
      box-shadow: var(--shadow-medium);
    }
    .slides-container {
      overflow: hidden;
      position: relative;
      border-radius: calc(var(--radius) - 6px);
    }
    .slides { display: flex; transition: transform .6s cubic-bezier(.22,.75,.18,1); }
    .slide { min-width: 100%; height: 70svh; position: relative; }
    .slide img { width: 100%; height: 100%; object-fit: cover; border-radius: 0; }
    .overlay {
      position: absolute;
      left: 16px;
      right: 16px;
      bottom: 16px;
      background: rgba(255,255,255,.85);
      backdrop-filter: blur(6px);
      border: 1px solid var(--hairline);
      color: var(--ink);
      padding: 16px;
      border-radius: var(--radius);
      box-shadow: var(--shadow-soft);
      opacity: 0;
      transform: translateY(10px);
      transition: opacity .6s ease, transform .6s ease .1s;
    }
    .slide.is-active .overlay { opacity: 1; transform: translateY(0); }
    .nav-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      z-index: 10;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: 0;
      background: rgba(255,255,255,.8);
      display: grid;
      place-items: center;
      cursor: pointer;
      box-shadow: var(--shadow-soft);
      transition: var(--transition);
    }
    .nav-btn:hover { background: #fff; transform: translateY(-50%) scale(1.05); }
    .nav-btn.prev { left: 16px; }
    .nav-btn.next { right: 16px; }
    .dots { position: absolute; inset: auto 0 32px; display: flex; gap: 10px; justify-content: center; z-index: 5; }
    .dots button { width: 10px; height: 10px; border-radius: 50%; border: 1.5px solid #fff; background: transparent; transition: var(--transition); box-shadow: 0 1px 3px rgba(0,0,0,.2); cursor: pointer;}
    .dots button[aria-current="true"] { background: #fff; }
    .grid { display: grid; gap: 24px; }
    @media (min-width: 720px) { .grid.two { grid-template-columns: repeat(2,1fr); } }
    .card {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow-soft);
      transition: transform .25s ease, box-shadow .25s ease;
      will-change: transform, box-shadow;
      overflow: hidden;
    }
    .grid.two .card img {
      height: 250px;
      width: 100%;
      object-fit: cover;
    }
    .card:hover { transform: translateY(-5px); box-shadow: var(--shadow-medium); }
    .card .body { padding: 24px; }
    .card h3 { font-family: 'Playfair Display', serif; margin: 0 0 8px; color: var(--accent); }
    .timeline { position: relative; max-width: 900px; margin: 40px auto 0; }
    .timeline::before { content: ""; position: absolute; left: 45px; top: 10px; bottom: 10px; width: 2px; background: var(--brand-light); }
    .tl-item { display: grid; grid-template-columns: 90px 1fr; gap: 16px; align-items: center; position: relative; margin-bottom: 20px; }
    .tl-time {
      font-weight: 600;
      font-size: 1.1rem;
      color: var(--accent);
      text-align: left;
      position: relative;
      z-index: 2;
    }
    .tl-dot { position: absolute; left: 45px; top: 50%; transform: translate(-50%, -50%); width: 16px; height: 16px; border-radius: 50%; background: var(--bg); border: 3px solid var(--brand-light); z-index: 1; }
    .tl-card.card { box-shadow: var(--shadow-soft); padding: 20px; will-change: none; }
    .tl-card.card:hover { transform: none; box-shadow: var(--shadow-medium); }
    .tl-card .body { padding: 0; }
    .tl-card .place { color: var(--muted); font-size: .95rem; }
    .tl-card b { color: var(--accent); }
    .rsvp-card {
      max-width: 600px;
      margin: 0 auto;
      padding: 32px;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow-medium);
    }
    .field { display: flex; flex-direction: column; gap: .5rem; margin-bottom: 1.2rem; }
    .field span { font-weight: 600; color: var(--accent); }
    .input, .select {
      width: 100%;
      padding: 12px 16px;
      border-radius: 10px;
      border: 1.5px solid #e0e0e0;
      background: #f9f9f9;
      box-shadow: none;
      outline: none;
      transition: var(--transition);
      font-size: 1rem;
      font-family: 'Poppins', sans-serif;
    }
    .input:focus, .select:focus { box-shadow: 0 0 0 3px var(--brand-light); border-color: var(--brand); }
    .helper { font-size: .9rem; color: var(--muted); text-align: center; margin-top: 16px; }
    .player { position: fixed; right: 16px; bottom: 16px; z-index: 50; display: flex; align-items: center; gap: .6rem; padding: .5rem; background: #fff; border-radius: 999px; box-shadow: var(--shadow-medium); }
    .disc { width: 32px; height: 32px; border-radius: 50%; background: radial-gradient(circle at 50% 50%, #444 0 8px, #222 9px 50%, #111 51% 100%), repeating-radial-gradient(circle at 50% 50%, rgba(255,255,255,.08) 0 2px, rgba(0,0,0,.15) 2px 4px); position: relative; flex: 0 0 32px; box-shadow: inset 0 1px 4px rgba(0,0,0,.2); animation: spin 5s linear infinite; animation-play-state: paused; }
    .disc::after { content: ""; position: absolute; width: 8px; height: 8px; border-radius: 50%; background: var(--brand); top: 50%; left: 50%; transform: translate(-50%,-50%); }
    .player.playing .disc { animation-play-state: running; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .icon-btn { width: 40px; height: 40px; display: grid; place-items: center; border-radius: 50%; border: 0; background: transparent; cursor: pointer; transition: var(--transition); }
    .icon-btn:hover { background-color: #f0f0f0; }
    .icon { width: 20px; height: 20px; display: block; }
    .icon path { fill: var(--ink); }
    footer.signature { text-align: center; color: var(--muted); padding-bottom: 80px; }
    footer.signature em {
      font-family: 'Dancing Script', cursive;
      font-size: clamp(28px, 6vw, 42px);
      color: var(--brand);
      font-weight: 500;
    }
    .reveal {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity .8s ease, transform .8s ease;
      will-change: opacity, transform;
    }
    .reveal.visible {
      opacity: 1;
      transform: none;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef, useMemo } = React;

    // HOOK PERSONALIZADO PARA ANIMACIONES
    function useReveal() {
      const ref = useRef(null);
      useEffect(() => {
        const element = ref.current;
        if (!element) return;
        const observer = new IntersectionObserver(
          ([entry]) => {
            if (entry.isIntersecting) {
              element.classList.add('visible');
              observer.unobserve(element);
            }
          }, { threshold: 0.1 }
        );
        observer.observe(element);
        return () => {
          if (element) observer.unobserve(element);
        };
      }, []);
      return ref;
    }
    
    // --- COMPONENTES ---

    // COMPONENTE: COUNTDOWN
    const Countdown = () => {
      const eventDate = useMemo(() => new Date('2025-12-06T13:30:00'), []);
      const calculateTimeLeft = () => {
        const difference = +eventDate - +new Date();
        if (difference <= 0) return { days: 0, hours: 0, minutes: 0, seconds: 0 };
        return {
          days: Math.floor(difference / (1000 * 60 * 60 * 24)),
          hours: Math.floor((difference / (1000 * 60 * 60)) % 24),
          minutes: Math.floor((difference / 1000 / 60) % 60),
          seconds: Math.floor((difference / 1000) % 60),
        };
      };
      const [timeLeft, setTimeLeft] = useState(calculateTimeLeft());
      useEffect(() => {
        const timer = setTimeout(() => setTimeLeft(calculateTimeLeft()), 1000);
        return () => clearTimeout(timer);
      });
      const format = (num) => String(num).padStart(2, '0');
      return (
        <div className="countdown" aria-live="polite">
          <div className="time-box"><span className="num">{format(timeLeft.days)}</span><span className="label">Días</span></div>
          <div className="time-box"><span className="num">{format(timeLeft.hours)}</span><span className="label">Horas</span></div>
          <div className="time-box"><span className="num">{format(timeLeft.minutes)}</span><span className="label">Minutos</span></div>
          <div className="time-box"><span className="num">{format(timeLeft.seconds)}</span><span className="label">Segundos</span></div>
        </div>
      );
    };

    // COMPONENTE: HERO
    const Hero = () => {
      const revealRef = useReveal();
      const handleScrollToHistory = () => document.getElementById('historia')?.scrollIntoView({ behavior: 'smooth' });
      const handleAddToCalendar = () => {
        const start = new Date('2025-12-06T13:30:00');
        const end = new Date(start.getTime() + 4 * 60 * 60 * 1000);
        const pad = n => String(n).padStart(2, '0');
        const fmt = d => `${d.getUTCFullYear()}${pad(d.getUTCMonth() + 1)}${pad(d.getUTCDate())}T${pad(d.getUTCHours())}${pad(d.getUTCMinutes())}00Z`;
        const ics = ['BEGIN:VCALENDAR','VERSION:2.0','PRODID:-//Creative Studio//Boda//ES','BEGIN:VEVENT',`UID:${Date.now()}@boda`,`DTSTAMP:${fmt(new Date())}`,`DTSTART:${fmt(start)}`,`DTEND:${fmt(end)}`,'SUMMARY:Boda de Isabel & Alejandro','LOCATION:Iglesia Retalhuleu; Recepción: Salón Las Morenas','DESCRIPTION:Acompáñanos en nuestro gran día 💕','END:VEVENT','END:VCALENDAR'].join('\r\n');
        const blob = new Blob([ics], { type: 'text/calendar' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href = url; a.download = 'Boda-Isabel-Alejandro.ics'; document.body.appendChild(a); a.click(); a.remove();
        setTimeout(() => URL.revokeObjectURL(url), 5000);
      };
      return (
        <header className="hero" id="hero">
          <div className="wrap reveal visible" ref={revealRef}>
            <span className="badge">NUESTRA BODA</span>
            <h1>Jaqui y Luis</h1>
            <p className="sub">6 de Diciembre de 2025 · 1:30 pm</p>
            <Countdown />
            <div className="cta-row">
              <button className="btn secondary" onClick={handleScrollToHistory}>Nuestra Historia</button>
              <button className="btn secondary" onClick={handleAddToCalendar}>Añadir al Calendario</button>
            </div>
          </div>
        </header>
      );
    };
    
    // COMPONENTE: HISTORIA (SLIDER)
    const Historia = ({ onPlaySong }) => {
        const slidesData = [
            { img: '/imagenes/historia-1.jpg', alt: 'Cuando nos conocimos', date: '02 de Septiembre, 2025', caption: 'Una mirada bastó para empezar la aventura.' },
            { img: '/imagenes/historia-2.jpg', alt: 'Primera cita', date: '16 de Octubre, 2025', caption: 'Entre risas, café y mil planes por delante.' },
            { img: '/imagenes/historia-3.jpg', alt: 'Primer viaje', date: '08 de Enero, 2026', caption: 'Descubrimos que el mejor destino es estar juntos.' },
            { img: '/imagenes/historia-4.jpg', alt: 'La propuesta', date: '12 de Febrero, 2027', caption: '¡Dijo que sí! El comienzo de una nueva etapa.' },
        ];
        const [currentIndex, setCurrentIndex] = useState(0);
        const revealRef = useReveal();
        const timeoutRef = useRef(null);
        const resetTimeout = () => { if (timeoutRef.current) clearTimeout(timeoutRef.current); };
        useEffect(() => {
            resetTimeout();
            timeoutRef.current = setTimeout(() => setCurrentIndex(prev => prev === slidesData.length - 1 ? 0 : prev + 1), 6000);
            return () => resetTimeout();
        }, [currentIndex]);
        const goToSlide = index => setCurrentIndex(index);
        const goToPrev = () => goToSlide(currentIndex === 0 ? slidesData.length - 1 : currentIndex - 1);
        const goToNext = () => goToSlide(currentIndex === slidesData.length - 1 ? 0 : currentIndex + 1);
        return (
            <section id="historia" className="wrap reveal sectioned" ref={revealRef}>
                <h2 className="title">Nuestra Historia</h2>
                <p className="subtitle">Un viaje a través de los momentos que nos trajeron hasta aquí.</p>
                <div className="center-actions">
                    <button className="btn primary btn-script" onClick={onPlaySong}>
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                        Reproducir Nuestra Canción
                    </button>
                </div>
                <div className="slider">
                    <div className="slides-container">
                        <ul className="slides" style={{ transform: `translateX(-${currentIndex * 100}%)` }}>
                            {slidesData.map((slide, i) => (
                                <li key={i} className={`slide ${i === currentIndex ? 'is-active' : ''}`}>
                                    <img src={slide.img} alt={slide.alt} loading="lazy" />
                                    <div className="overlay"><b>{slide.date}</b><p style={{ margin: '4px 0 0' }}>{slide.caption}</p></div>
                                </li>
                            ))}
                        </ul>
                    </div>
                    <button className="nav-btn prev" onClick={goToPrev}>⟵</button>
                    <button className="nav-btn next" onClick={goToNext}>⟶</button>
                    <div className="dots">
                        {slidesData.map((_, i) => <button key={i} aria-current={i === currentIndex} onClick={() => goToSlide(i)}></button>)}
                    </div>
                </div>
            </section>
        );
    };
    
    // COMPONENTE: LUGARES
    const Card = ({ imgSrc, imgAlt, title, location, details, mapLink }) => {
      const revealRef = useReveal();
      return (
        <article className="card reveal" ref={revealRef}>
          <img src={imgSrc} alt={imgAlt} loading="lazy" />
          <div className="body">
            <h3>{title}</h3>
            <p className="helper">{location}<br />{details}</p>
            <div className="center-actions">
              <a className="btn primary" href={mapLink} target="_blank" rel="noopener noreferrer">Ver Ubicación</a>
            </div>
          </div>
        </article>
      );
    };
    const Lugares = () => {
      const revealRef = useReveal();
      return (
        <section id="lugares" className="wrap reveal sectioned" ref={revealRef}>
          <h2 className="title">La Celebración</h2>
          <p className="subtitle">Estos son los lugares donde celebraremos nuestro amor.</p>
          <div className="grid two">
            <Card imgSrc="/imagenes/ceremonia.jpg" imgAlt="Lugar de la ceremonia" title="Ceremonia" location="Iglesia Retalhuleu" details="Llegar 15 minutos antes." mapLink="https://maps.google.com/?q=Iglesia+Retalhuleu" />
            <Card imgSrc="/imagenes/recepcion.jpg" imgAlt="Lugar de la recepción" title="Recepción" location="Salón Las Morenas" details="Acompáñanos a la cena y el baile." mapLink="https://maps.google.com/?q=Salón+Las+Morenas" />
          </div>
        </section>
      );
    };

    // COMPONENTE: ITINERARIO
    const TimelineItem = ({ time, title, place, emoji }) => {
      const revealRef = useReveal();
      return (
        <li className="tl-item reveal" ref={revealRef}>
          <div className="tl-time">{time}</div>
          <div className="tl-card card"><div className="body"><b>{title}</b><div className="place">{place} {emoji}</div></div></div>
          <span className="tl-dot" aria-hidden="true"></span>
        </li>
      );
    };
    const Itinerario = () => {
      const revealRef = useReveal();
      return (
        <section id="itinerario" className="wrap reveal sectioned" ref={revealRef}>
          <h2 className="title">Itinerario</h2>
          <p className="subtitle">Planeamos cada momento con mucho cariño para este día.</p>
          <ul className="timeline">
            <TimelineItem time="6:00 pm" title="Ceremonia Religiosa" place="Iglesia Retalhuleu" />
            <TimelineItem time="8:00 pm" title="Recepción y Cena" place="Salón Las Morenas" />
            <TimelineItem time="10:30 pm" title="Corte del Pastel" place="¡El momento más dulce!" />
            <TimelineItem time="12:00 am" title="Despedida" place="Gracias por ser parte de nuestra historia." emoji="💕"/>
          </ul>
        </section>
      );
    };

    // COMPONENTE: RSVP
    const Rsvp = () => {
      const [name, setName] = useState('');
      const [companions, setCompanions] = useState('0');
      const revealRef = useReveal();
      const handleSubmit = e => {
        e.preventDefault();
        if (!name.trim()) { alert('Por favor, escribe tu nombre.'); return; }
        const compText = companions === '-1' ? 'Lamentablemente no podré asistir.' : (companions === '0' ? 'Confirmo mi asistencia (sin acompañantes).' : `Confirmo mi asistencia con ${companions} acompañante${companions === '1' ? '' : 's'}.`);
        const msg = `¡Hola! Soy ${name}. ${compText}`;
        window.open(`https://wa.me/44649407?text=${encodeURIComponent(msg)}`, '_blank');
      };
      return (
        <section id="rsvp" className="wrap reveal sectioned" ref={revealRef}>
          <h2 className="title">Confirmar Asistencia</h2>
          <p className="subtitle">Tu presencia es nuestro mayor regalo. Por favor, confirma antes del 6 de Noviembre de 2025.</p>
          <form className="rsvp-card" onSubmit={handleSubmit}>
            <div className="field"><span>Nombre Completo</span><input className="input" type="text" placeholder="Escribe tu nombre y apellido" value={name} onChange={e => setName(e.target.value)} required /></div>
            <div className="field"><span>Acompañantes</span><select className="select" value={companions} onChange={e => setCompanions(e.target.value)}><option value="0">Asistiré sin acompañantes</option><option value="1">Asistiré con 1 acompañante</option><option value="2">Asistiré con 2 acompañantes</option><option value="-1">Lamentablemente no podré asistir</option></select></div>
            <div style={{ marginTop: '24px', textAlign: 'center' }}>
              <button type="submit" className="btn primary btn-script"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.5 3.5a10 10 0 0 0-16.2 11.3L3 21l6.4-1.3A10 10 0 0 0 20.5 3.5Zm-1.1 13a8 8 0 0 1-11.8 1.5l-.3-.2-3 .6.6-2.9-.2-.3A8 8 0 1 1 19.4 16.5ZM8.9 7.9c.2-.5.4-.5.7-.5h.6c.2 0 .5 0 .7.5s.9 1.5.9 1.6.1.4 0 .6-.2.4-.4.6-.4.5-.2.9c.2.4 1 1.6 2.1 2.6 1.5 1.3 2.7 1.7 3.1 1.9s.5 0 .7-.2.8-.9 1-1.2.4-.2.6-.1.6.3 1.4.7 1.2.6 1.4.9.1.9-.2 1.5c-.3.6-1.2 1.1-1.6 1.1s-.9.2-3-.8a13.6 13.6 0 0 1-3.8-2.4 12.2 12.2 0 0 1-2.2-2.6c-.8-1.2-1.1-2.1-1.2-2.4-.2-.4 0-.8.1-1s.5-1.2.6-1.4Z"/></svg>Confirmar por WhatsApp</button>
              <p className="helper">O puedes llamar al <a href="tel:44649407">44 64 94 07</a>.</p>
            </div>
          </form>
        </section>
      );
    };
    
    // COMPONENTE: MUSIC PLAYER
    const MusicPlayer = React.forwardRef((props, ref) => {
        const [isPlaying, setIsPlaying] = useState(false);
        const [isMuted, setIsMuted] = useState(false);
        const audioRef = ref;
        const togglePlay = () => audioRef.current.paused ? audioRef.current.play() : audioRef.current.pause();
        const toggleMute = () => audioRef.current.muted = !audioRef.current.muted;
        useEffect(() => {
            const audio = audioRef.current;
            if(!audio) return;
            const updateState = () => { setIsPlaying(!audio.paused); setIsMuted(audio.muted); };
            audio.addEventListener('play', updateState);
            audio.addEventListener('pause', updateState);
            audio.addEventListener('volumechange', updateState);
            return () => { audio.removeEventListener('play', updateState); audio.removeEventListener('pause', updateState); audio.removeEventListener('volumechange', updateState); };
        }, [audioRef]);
        return (
            <div className={`player ${isPlaying ? 'playing' : ''}`}>
                <div className="disc" aria-hidden="true"></div>
                <button className="icon-btn" onClick={togglePlay}>
                    <svg className="icon" viewBox="0 0 24 24" style={{ display: isPlaying ? 'none' : 'block' }}><path d="M8 5v14l11-7z"/></svg>
                    <svg className="icon" viewBox="0 0 24 24" style={{ display: isPlaying ? 'block' : 'none' }}><path d="M6 5h4v14H6zm8 0h4v14h-4z"/></svg>
                </button>
                <button className="icon-btn" onClick={toggleMute}>
                    <svg className="icon" viewBox="0 0 24 24" style={{ display: isMuted ? 'none' : 'block' }}><path d="M4 10v4h4l5 4V6l-5 4H4zm12.5 2a4.5 4.5 0 0 0-2.3-3.9v7.8a4.5 4.5 0 0 0 2.3-3.9z"/></svg>
                    <svg className="icon" viewBox="0 0 24 24" style={{ display: isMuted ? 'block' : 'none' }}><path d="M16.5 12a4.5 4.5 0 0 1-2.3 3.9V8.1A4.5 4.5 0 0 1 16.5 12zM4 10v4h4l5 4V6l-5 4H4zm12.6 6.2l1.4 1.4L21.6 18l-1.8-1.8L21.6 14l-1.4-1.4-1.8 1.8-1.8-1.8L15.2 14l1.8 1.8-1.8 1.8z"/></svg>
                </button>
            </div>
        );
    });

    // COMPONENTE: FOOTER
    const Footer = () => {
        const revealRef = useReveal();
        return (
            <footer className="signature reveal sectioned" ref={revealRef}>
                <div>Con todo nuestro cariño,</div>
                <em>Isabel & Alejandro</em>
            </footer>
        );
    };
    
    // COMPONENTE PRINCIPAL: APP
    function App() {
      const audioRef = useRef(null);
      const handlePlaySong = () => {
        if (audioRef.current) {
          if(audioRef.current.paused) {
            audioRef.current.play().catch(e => console.error("Audio play failed:", e));
          } else {
            audioRef.current.pause();
          }
        }
      };
      
      return (
        <React.Fragment>
          <Hero />
          <MusicPlayer ref={audioRef} />
          <main>
            <Historia onPlaySong={handlePlaySong} />
            <Lugares />
            <Itinerario />
            <Rsvp />
          </main>
          <Footer />
          <audio ref={audioRef} src="/musica/fondo.mp3" preload="auto" loop></audio>
        </React.Fragment>
      );
    }
    
    const container = document.getElementById('root');
    const root = ReactDOM.createRoot(container);
    root.render(<App />);
  </script>
</body>
</html>

